# ajax的全面总结


#### 一.什么是ajax

​	就是在页面不跳转的情况下，在页面后台提交数据，部分更新页面的内容，提高用和用户的交互作用。

毕竟是在一个页面就可以完成所有的请求

​	

#### 二.原生ajax的写法

###### 1.XMLHttpRequest对象
​	ajax的核心所在，用于和后台交换数据，能够在不重新加载页面的情况下更新网页，在页面完成加载后，向后台请求数据和发送数据。

###### 2.实现的流程

建立一个对象->  打开请求地址，初始化数据   ->向后台发送数据 ->监听回掉函数的状态->收到服务器返回的应答结果

```js
var ajax = new XMLHttpRequest();
ajax.onload = function(){       //js理解 异步（耗费时间，不确定）（事件监听，数据返回时，触发onload事件）
    ajax.response;
}
ajax.open();
ajax.send();  //ajax.onload不能放到下面，因为如果网速过快，事件注册不了，内部代码可能一直没有机会去运行
```

###### 3.原生写法的注意点

​	(1) open  中传入三个参数 第三个参数中使用ture的时候，表示的是脚本会在send()方法之后继续执行，而不等待服务器的响应。同步

​		false 是默认值，表示的是页面是异步执行的

​	(2) status 

http的状态码，200表示的是成功，404 notfound

###### 4.jquery中的ajax

```js
$.ajax({
    type:
  	url:
  	async:       //是否支持异步刷新，默认是true
  	data:
  	dataType:     // xml,json,string
  	success:function(data){
    
	}
       error:funciton(data){
    
}
})
```

#### 三. 对get和post的理解

​	

|          |     get      |            post            |
| :------: | :----------: | :------------------------: |
| 后退按钮/刷新  |      无害      | 数据会重新提交（浏览器应该告知用户数据会被重新提交） |
|    缓存    |     yes      |             no             |
|    书签    |     yes      |             no             |
|   编码类型   |              |        为二进制数据使用多重编码        |
|    历史    |     参数保存     |          参数不可以保存           |
| 对数据长度的限制 | 最大长度 2048个字符 |            没有限制            |
| 对数据类型的限制 |   只允许ascii   |            没有限制            |
|   可见性    |    url可见     |        数据不会显示在url中         |
|          |              |                            |

总结: get不安全   post 更安全

​	get有数据长度的限制，且数据类型只允许ascii字符

#### 四.success 和 complete的区别 

​	success : 请求成功后回掉函数

​	comolete : 请求完成后的回掉函数（请求成功或则请求失败时都可以调用）

​	如果调success，那么一定会调用complete ，但是调用了complete,不一定会调用success

#### 五.xml->json

c/s架构的软件用xml来存储数据，只能有一个根元素，html呈现数据，

在这里呢，json已经成为一种上流的数据交互格式。所以现在ajax=Ajaj

#### 七.json和jsonp

json: 是一种轻量级的数据交换方式

jsonp: 一种借助”<script>“元素解决主流浏览器的跨域数据访问问题的方式。

#### 八.ajax跨域访问

主要提一下ajax的限制，这里说ajax的请求和访问同样会受到浏览器的同源策略的限制，不能访问不同主域中的地址。上述中的jsonp就是一种方式。

​	(同源策略: 是一种约定，浏览器的核心也是最基本的安全功能，如果缺少了同源策略，则浏览器的正常功能可能会受影响，可以说web是构建在同源策略的基础之上，浏览器只是针对同源策略的一种实现)

同源: 域名协议端口相同

​	当然还有集中方式，在这里 就稍微提一下，完了我在去了解

​	jsonp    doucument.domain    window.name    window.pastMessage      cors     

web sockets  

#### 九.不可以忽略的http头文件

从network中找到响应的ajax请求 ，查看请求头和响应头的信息，能够大概的知道这次的请求是怎么样的。具体看下头文件的信息

1.请求头信息

```text
accept:客户端支持的数据类型
accept-charset：客户端采用的编码
accept-encoding:客户支持的数据压缩格式
accept-language:客户端的语言信息
cookies：客户端的cookie
host：请求的服务器地址
connection:客户端与服务连接类型
连接：http://tool.oschina.net/commons/
```

2.优缺点

​	1.页面无刷新，在页面内与服务器通信，减少用户等待的时间，增强用户体验

​	2.使用异步与服务器通信，响应速度加快

​	3.可以把一些原本服务器的工作转接到客户端，利用客户端闲置的能力来处理，减轻了服务器和宽带的负担。

​	4.有广泛的技术支持，不会下载插件或则小程序。

#### 缺点



​	1.无法进行页面的后退

​	2.对搜索引擎的支持比较弱

​	3.可能会影响异步处理机制

​	4.安全问题，对一些网站攻击，如csff xxs  sql注入等不能很好的防御

### 补充：

​	编程思想  ：

```text
http协议  ，无状态协议  通信一次中断一次
           三次握手，四次挥手的理解，类似于打电话
           HTTP是一种不保存状态，该协议对于发送过的请求或者响应都不做持久化处理，方便处理大量的事物，以及协议的可伸缩性。还有这样还可以减少服务器的cpu及其内存资源的消耗。
           
```

学习方法：去学习一个东西时，要看值不值得，解决什么问题

学习的流程：学习基本的语法

​			完整的东西（书籍，文档，会看文档，）全栈书籍

​			火狐开发者

# php的理解

有了ajax技术，就是在页面不刷新的情况下，或则等用户有需求的时候，在向服务器请求数据。

传送过程   客户端发起请求 -> 服务器检测到是php文件-> php模块对文件进行解析->丢给服务器 ->浏览器->客户端

因此， html发送出去的数据接收到的都是 在浏览器输出的内容。

但是总得有一个接受数据端，便有了后台语言  php